{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../styles/adminadmission.css\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AdminAdmission(){var tmp;var username={rollNumber:tmp};var approval={};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),approvals=_useState2[0],setApprovals=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var _useState5=useState({rollNumber:\"\"}),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],setFormData=_useState6[1];useEffect(function(){var fetchAllCredentials=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8800/checkApprove\");case 3:res=_context.sent;approval=res.data;console.log(approval);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchAllCredentials(){return _ref.apply(this,arguments);};}();fetchAllCredentials();},[]);var check=false;var temp=0;var validate=function validate(){username.rollNumber=tmp;for(var i=0;i<approval.length;i++){if(approval[i][\"RollNumber\"]==username.rollNumber){check=true;temp=i;}}if(check){var ap=approval[temp][\"isAccepted\"];console.log(typeof ap);if(approval[temp][\"isAccepted\"]==1){setText(\"This application has already been approved.\");}else{try{console.log(username.rollNumber);axios.post(\"http://localhost:8800/approve\",username);axios.post(\"http://localhost:8800/sendEmail\",approval[temp]);// alert(username.rollNumber)\nsetText(\"The application has been approved successfully.\");}catch(err){console.log(err);}}}};var handleChange=function handleChange(event){tmp=event.target.value;};return/*#__PURE__*/_jsx(\"div\",{id:\"adminAd-container\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"adminAd\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admission Approval\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"adContainer\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Enter Roll Number:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"rollNumber\",type:\"text\",value:tmp,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:validate,children:\"Approve\"}),/*#__PURE__*/_jsx(\"p\",{children:text})]})]})});}export default AdminAdmission;","map":{"version":3,"names":["useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminAdmission","tmp","username","rollNumber","approval","_useState","_useState2","_slicedToArray","approvals","setApprovals","_useState3","_useState4","text","setText","_useState5","_useState6","formData","setFormData","fetchAllCredentials","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","sent","data","console","log","t0","stop","apply","arguments","check","temp","validate","i","length","ap","post","err","handleChange","event","target","value","id","children","className","name","type","onChange","onClick"],"sources":["C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/src/components/AdminAdmission.jsx"],"sourcesContent":["import \"../styles/adminadmission.css\"\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nfunction AdminAdmission() {\n    var tmp;\n    var username = {\n        rollNumber:tmp,\n    }\n    var approval = {};\n    const [approvals,setApprovals] = useState([])\n    const [text,setText] = useState([])\n    const [formData, setFormData] = useState({\n        rollNumber: \"\"\n      });\n    useEffect(()=>{\n        const fetchAllCredentials = async () => {\n          try{\n            const res = await axios.get(\"http://localhost:8800/checkApprove\")\n            approval = res.data\n            console.log(approval)\n          }\n          catch(err){\n            console.log(err)\n          }\n        };\n        fetchAllCredentials();\n      },[])\n    var check = false;\n    var temp = 0\n    const validate = () => {\n        username.rollNumber=tmp\n        for(var i=0; i<approval.length; i++){\n            if (approval[i][\"RollNumber\"]==username.rollNumber) {\n                check = true;\n                temp = i;\n            }\n        }\n        if (check) {\n            var ap = approval[temp][\"isAccepted\"];\n            console.log(typeof(ap))\n            if (approval[temp][\"isAccepted\"]==1) {\n                setText(\"This application has already been approved.\")\n            }\n            else{\n                try{\n                    console.log(username.rollNumber)\n                    axios.post(\"http://localhost:8800/approve\", username);\n                    axios.post(\"http://localhost:8800/sendEmail\", approval[temp])\n                    // alert(username.rollNumber)\n                    setText(\"The application has been approved successfully.\")\n                  }\n                  catch(err){\n                    console.log(err)\n                  }\n            }\n        }\n    }\n    const handleChange = (event) => {\n        tmp = event.target.value;\n      };\n    return (   \n        <div id=\"adminAd-container\">\n            <div id=\"adminAd\">\n                <h1>Admission Approval</h1>\n                <div className=\"adContainer\">\n                    <label>Enter Roll Number:</label>\n                    <input name=\"rollNumber\" type={\"text\"} value={tmp} onChange={handleChange}/>\n                    <button onClick={validate}>Approve</button>\n                    <p>{text}</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default AdminAdmission;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}