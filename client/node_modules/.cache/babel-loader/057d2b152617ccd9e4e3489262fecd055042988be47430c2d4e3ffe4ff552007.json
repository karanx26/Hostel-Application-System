{"ast":null,"code":"import _objectSpread from\"C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../styles/loginform.css';import{useEffect,useState}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(){var _useState=useState({userName:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),lformData=_useState2[0],setFormData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),loginData=_useState4[0],setLoginData=_useState4[1];useEffect(function(){var fetchAllCredentials=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8800/credentials\");case 3:res=_context.sent;setLoginData(res.data);console.log(res);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchAllCredentials(){return _ref.apply(this,arguments);};}();fetchAllCredentials();},[]);var validate=function validate(formData,loginData){if(formData.userName===\"admin\"&&formData.password===\"admin\"){window.localStorage.setItem(\"adminUser\",true);window.localStorage.setItem(\"isLoggedIn\",true);window.localStorage.setItem(\"userName\",formData.userName);return;}if(!formData.userName){alert(\"Username is required\");return;}var check=0;var temp=0;for(var i=0;i<loginData.length;i++){if(formData.userName!==loginData[i]['RollNumber']){check=0;}check=1;temp=i;}if(check===0){alert(\"Invalid Username\");return;}if(!formData.password){alert(\"Password is required!\");return;}if(formData.password!==loginData[temp]['Password']){alert(\"Wrong Password\");return;}window.localStorage.setItem(\"adminUser\",false);window.localStorage.setItem(\"isLoggedIn\",true);window.localStorage.setItem(\"userName\",formData.userName);};return/*#__PURE__*/_jsx(\"div\",{id:\"login-wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Hostel Management System\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email or Phone\",id:\"username\",value:lformData.userName,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},lformData),{},{userName:e.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",id:\"password\",value:lformData.password,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},lformData),{},{password:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{className:\"loginPage\",onClick:function onClick(){{validate(lformData,loginData);};},children:\"Log In\"})]})});}export default LoginForm;","map":{"version":3,"names":["useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","LoginForm","_useState","userName","password","_useState2","_slicedToArray","lformData","setFormData","_useState3","_useState4","loginData","setLoginData","fetchAllCredentials","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","sent","data","console","log","t0","stop","apply","arguments","validate","formData","window","localStorage","setItem","alert","check","temp","i","length","id","children","type","placeholder","value","onChange","e","_objectSpread","target","className","onClick"],"sources":["C:/Users/91932/Desktop/AWTP/hostel-admission-management-system-main/client/src/components/LoginForm.jsx"],"sourcesContent":["import '../styles/loginform.css'\nimport { useEffect, useState } from \"react\";\nimport axios from 'axios'\nfunction LoginForm() {\n    const [lformData, setFormData] = useState({\n        userName: \"\",\n        password: \"\",\n      });\n    const [loginData, setLoginData] = useState([])\n    useEffect(()=>{\n      const fetchAllCredentials = async () => {\n        try{\n          const res = await axios.get(\"http://localhost:8800/credentials\")\n          setLoginData(res.data)\n          console.log(res)\n        }\n        catch(err){\n          console.log(err)\n        }\n      };\n      fetchAllCredentials();\n    },[])\n\n    const validate = (formData, loginData) => {\n        if(formData.userName === \"admin\" && formData.password === \"admin\"){\n          window.localStorage.setItem(\"adminUser\", true)\n          window.localStorage.setItem(\"isLoggedIn\", true)\n          window.localStorage.setItem(\"userName\", formData.userName)\n          return\n        }\n        if (!formData.userName) {\n          alert(\"Username is required\")\n          return\n        }\n        var check =0;\n        var temp = 0;\n        for (var i=0; i<loginData.length; i++){\n          if (formData.userName !== loginData[i]['RollNumber']) {\n            check = 0;\n          }\n            check = 1;\n            temp = i;\n        }\n        if (check === 0) {\n          alert(\"Invalid Username\")\n          return\n        }\n        if (!formData.password) {\n          alert(\"Password is required!\")\n          return\n        } \n        if (formData.password !== loginData[temp]['Password']) {\n            alert(\"Wrong Password\")\n            return\n        }\n        window.localStorage.setItem(\"adminUser\", false)\n        window.localStorage.setItem(\"isLoggedIn\", true)\n        window.localStorage.setItem(\"userName\", formData.userName)\n    };\n\n    return (\n        <div id='login-wrapper'>\n                <form>\n                    <h2>Hostel Management System</h2>\n                    <label>Username</label>\n                    <input type=\"text\" placeholder=\"Email or Phone\" id=\"username\" value={lformData.userName} onChange={(e) => setFormData({ ...lformData, userName: e.target.value })}/>\n                    <label>Password</label>\n                    <input type=\"password\" placeholder=\"Password\" id=\"password\"value={lformData.password} onChange={(e) => setFormData({ ...lformData, password: e.target.value })}/>\n                    <button className=\"loginPage\" onClick={() => {{validate(lformData,loginData)};}}>Log In</button>\n                </form>\n        </div>\n    );\n}\n\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}